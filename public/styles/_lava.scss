// stylesheet for animated lava lamp
$main: indigo;
$second: rgb(174, 1, 190);
$liquid: rgba(174, 1, 190, 0.5);
$bottomHeight: 100px;
$lampWidth: 200px;
$lava-1-ellipse: 90% 10%;
$whitenShadow: 80;

.lava-2 {
  position: absolute;
  background: rgb(252,176,69);
  background: linear-gradient(0deg, rgba(252,176,69,1) 0%, rgba(253,29,29,1) 53%, rgba(180,58,122,1) 100%); 
  // padding-top: $lampWidth / 5.0;
  // padding-right: $lampWidth / 5.5;
  // padding-bottom: $lampWidth / 5;
  // padding-left: $lampWidth / 5;
  width: $lampWidth / 5;
  height: $lampWidth / 4;
  top: 30%;
  left: 40%;
  transform: translateX(-50%) translateY(-50%);
  z-index: 20;
  box-shadow: 0px 0px 50px rgb(255, 0, 0);
  border-radius: 5000px;
  // shape-outside: ellipse(30% 45%);
  // clip-path: ellipse(30% 45%);
}

// lava in the lamp
.lava-1 {
  position: absolute;
  background: rgb(252,176,69);
  background: linear-gradient(0deg, rgba(252,176,69,1) 0%, rgba(253,29,29,1) 53%, rgba(180,58,122,1) 100%); 
  padding: 60px;
  top: 0%;
  left: 50%;
  transform: translateX(-50%) translateY(-50%);
  z-index: 20;
  box-shadow: 0px 0px 100px rgb(255, 0, 0);
  border-radius: 5000px;
}

@media (prefers-reduced-motion: no-preference) {
  .lava-1 {
    animation: lava-1 infinite 5s ease-in-out;
  }
}
@keyframes lava-1 {
  0% {
    transform: translateX(-50%) translateY(-50%);
    top: 55%;
    // shape-outside: ellipse($lava-1-ellipse);
    // clip-path: ellipse($lava-1-ellipse);
  }
  50% {
    top: 60%;
    transform: translateX(-50%) translateY(-50%);
    // shape-outside: ellipse($lava-1-ellipse);
    // clip-path: ellipse($lava-1-ellipse);
  }
  100% {
    transform: translateX(-50%) translateY(-50%);
    top: 55%;
    // shape-outside: ellipse($lava-1-ellipse);
    // clip-path: ellipse($lava-1-ellipse);
  }
}

// ellipse on top of cap
.top-cap-ellipse {
  background: rgba(253,29,29,1);
  height: $bottomHeight / 10;
  width: $lampWidth;
  position: relative;
  margin-bottom: -($bottomHeight / 20);
  left: 50%;
  transform: translateX(-50%);
  shape-outside: ellipse(15% 40%);
  clip-path: ellipse(15% 40%);
}

.lamp-cap {
  width: $lampWidth;
  height: $bottomHeight / 1.5;
  background: -webkit-linear-gradient(15deg, $main, adjust-color($main, $red: 50, $blue: 50, $green: 50));
  background: rgb(131,58,180);
  background: linear-gradient(108deg, rgba(131,58,180,1) 0%, rgba(253,29,29,1) 50%, rgba(252,176,69,1) 100%); 
  left: 50%;
  transform: translateX(-50%);
  z-index: -2;
  position: relative;
  shape-outside: polygon(
    35% 0%,
    65% 0%,
    70% 100%,
    30% 100%,
  );
  clip-path: polygon(
    35% 0%,
    65% 0%,
    70% 100%,
    30% 100%,
  );
} 

// ellipse on bottom of cap
.cap-ellipse {
  background-color: adjust-color($main, $red: 50, $blue: 50, $green: 50);
  height: $bottomHeight / 10;
  width: $lampWidth;
  position: relative;
  margin-top: -($bottomHeight / 20);
  margin-bottom: -($bottomHeight / 20);
  left: 50%;
  transform: translateX(-50%);
  z-index: -1;
  shape-outside: ellipse(20% 40%);
  clip-path: ellipse(20% 40%);
}

// right side shadow
.lamp-shadow {
  width: $lampWidth / 10;
  height: $bottomHeight * 4;
  position: absolute;
  left: 50%;
  transform: skewX(8.5deg) translateX(260%);
  z-index: -500;
  background-color: rgba(255,255,255 , 0.0);
  shape-outside: polygon(
    0% 100%,
    100% 100%,
    70% 0%,
    30% 0%,
  );
  box-shadow: 0px 0px 75px adjust-color($main, $red: $whitenShadow, $green: $whitenShadow, $blue: $whitenShadow) ;
}

// a polygon to cover the gap between the two shadow boxes on the side
.lamp-shadow-mid {
  position: absolute;
  left: 50%;
  width: $lampWidth;
  transform: translateX(-50%);
  height: ($bottomHeight * 4);
  shape-outside: polygon(
    0% 100%,
    100% 100%,
    70% 0%,
    30% 0%,
  );
  clip-path: polygon(
    0% 100%,
    100% 100%,
    70% 0%,
    30% 0%,
    );
  background-color:  rgba(0, 0, 0, 0);
  
  z-index: -400;
  // border-left: $bottomHeight solid transparent;
  // border-right: $bottomHeight solid transparent;
  // border-bottom: ($bottomHeight * 4) solid blue;
}

// left side shadow
.lamp-shadow-2 {
  width: $lampWidth / 10;
  height: $bottomHeight * 4;
  position: absolute;
  left: 50%;
  transform: skewX(-8.5deg) translateX(-360%);
  z-index: -500;
  background-color: rgba(255,255,255 , 0.0);
  shape-outside: polygon(
    0% 100%,
    100% 100%,
    70% 0%,
    30% 0%,
  );
  box-shadow: 0px 0px 75px adjust-color($main, $red: $whitenShadow, $green: $whitenShadow, $blue: $whitenShadow) ;
}

// absolute position, same as .lamp div, the only difference is the color and color orientation.
// 50% transparent so that the color of the div behind it is seen as well.
// the purpose of this is to give the lamp a more realistic color gradient, starting from bottom center
// this also covers the lava ball
.lamp-translucent-cover {
  width: $lampWidth;
  height: $bottomHeight * 4;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  background: rgb(174,1,190);
  z-index: 500;
  background: linear-gradient(90deg, rgba(174,1,190,0.5) 0%, rgba(180,90,180,0.4) 50%, rgba(174,1,190,0.5) 100%); 
  shape-outside: polygon(
    0% 100%,
    100% 100%,
    70% 0%,
    30% 0%,
  );
  clip-path: polygon(
    0% 100%,
    100% 100%,
    70% 0%,
    30% 0%,
  );
}

// the glass lamp
.lamp {
  width: $lampWidth;
  height: $bottomHeight * 4;
  position: relative;
  left: 50%;
  transform: translateX(-50%);
  z-index: 20;
  background: -webkit-linear-gradient($liquid, adjust-color($liquid, $red: 120, $blue: 120, $green: 120));
  shape-outside: polygon(
    0% 100%,
    100% 100%,
    70% 0%,
    30% 0%,
  );
  clip-path: polygon(
    0% 100%,
    100% 100%,
    70% 0%,
    30% 0%,
    );
}

// ellipse between glass and base
.middle-ellipse {
  background-color: $liquid;
  height: $bottomHeight / 10;
  width: $lampWidth;
  position: relative;
  margin-top: -($bottomHeight / 20);
  margin-bottom: -($bottomHeight / 20);
  left: 50%;
  transform: translateX(-50%);
  z-index: 100;
  shape-outside: ellipse(50% 50%);
  clip-path: ellipse(50% 50%);
}

// top of base
.lamp-top {
  width: $lampWidth;
  height: $bottomHeight * 1.3;
  position: relative;
  left: 50%;
  transform: translateX(-50%);
  background: -webkit-linear-gradient($second, $main);
  border-radius: 7px 7px 10px 10px;
  border-top: 3px inset black;
  shape-outside: polygon(
    0% 0%,
    100% 0,
    80% 100%,
    20% 100%,
  );
  clip-path: polygon(
    0% 0%,
    100% 0,
    80% 100%,
    20% 100%,
  );
  z-index: 2;
}

// bottom of base
.lamp-bottom {
  width: $lampWidth;
  height: $bottomHeight;
  position: relative;
  left: 50%;
  transform: translateX(-50%);
  shape-outside: polygon(
    20% 0,
    80% 0,
    100% 100%,
    0 100%
  );
  clip-path: polygon(
    20% 0,
    80% 0,
    100% 100%,
    0 100%
  );
  background: -webkit-linear-gradient($main, $second);
  border-radius: 10px;
  z-index: 2;
}

// ellipse on bottom of base
.bottom-ellipse {
  width: $lampWidth;
  height: $bottomHeight / 4;
  position: relative;
  left: 50%;
  z-index: 1;
  transform: translateY(-60%) translateX(-50%);
  shape-outside: ellipse(50% 50%);
  clip-path: ellipse(50% 50%);
  background: $second;
}
